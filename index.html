<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>CriptoHoy ‚Äî Noticias cripto al instante</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî¥</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--ink:#1a1a1a;--paper:#f5f0eb;--accent:#e63946;--accent2:#c1121f;--muted:#8a8578;--border:#ddd5ca;--card:#fff}
body{font-family:'Source Sans 3',sans-serif;background:var(--paper);color:var(--ink);min-height:100vh}
a{color:var(--accent);text-decoration:none}
::selection{background:var(--accent);color:#fff}

/* HEADER - Editorial style */
.top-bar{background:var(--ink);color:var(--paper);text-align:center;padding:6px;font-size:.7rem;letter-spacing:2px;text-transform:uppercase}
.header{border-bottom:3px double var(--ink);padding:1.5rem 0;text-align:center;position:sticky;top:0;background:var(--paper);z-index:100}
.header-inner{max-width:1200px;margin:0 auto;padding:0 2rem}
.masthead{font-family:'Playfair Display',serif;font-size:3rem;font-weight:900;letter-spacing:-1px;color:var(--ink)}
.masthead span{color:var(--accent)}
.header-sub{font-size:.8rem;color:var(--muted);margin-top:4px;letter-spacing:3px;text-transform:uppercase}
.nav{display:flex;justify-content:center;gap:2rem;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)}
.nav a{font-size:.8rem;text-transform:uppercase;letter-spacing:1.5px;color:var(--ink);font-weight:600;transition:.2s}
.nav a:hover,.nav a.active{color:var(--accent)}
.search-wrap{position:absolute;right:2rem;top:50%;transform:translateY(-50%)}
.search-wrap input{border:1px solid var(--border);background:transparent;padding:8px 16px;font-size:.85rem;font-family:inherit;width:200px;transition:.2s}
.search-wrap input:focus{outline:none;border-color:var(--ink)}

/* HERO - Featured article, magazine spread */
.hero-section{max-width:1200px;margin:2.5rem auto;padding:0 2rem}
.hero-card{display:grid;grid-template-columns:1.2fr 1fr;gap:0;background:var(--card);border:1px solid var(--border);cursor:pointer;transition:all .3s}
.hero-card:hover{box-shadow:0 20px 60px rgba(0,0,0,.08)}
.hero-img{background:linear-gradient(135deg,var(--accent),var(--accent2));min-height:400px;position:relative;overflow:hidden}
.hero-img::after{content:'';position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}
.hero-img .hero-number{position:absolute;bottom:20px;left:20px;font-family:'Playfair Display',serif;font-size:8rem;color:rgba(255,255,255,.15);font-weight:900;line-height:1}
.hero-content{padding:3rem;display:flex;flex-direction:column;justify-content:center}
.hero-content .cat{font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--accent);font-weight:700;margin-bottom:1rem}
.hero-content h1{font-family:'Playfair Display',serif;font-size:2.2rem;font-weight:900;line-height:1.2;margin-bottom:1rem;color:var(--ink)}
.hero-content .excerpt{font-size:1rem;line-height:1.8;color:var(--muted);margin-bottom:1.5rem}
.hero-content .meta{font-size:.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px}

/* GRID - 2 column editorial layout */
.section{max-width:1200px;margin:0 auto;padding:0 2rem 2rem}
.section-title{font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:700;padding-bottom:.8rem;border-bottom:2px solid var(--ink);margin-bottom:1.5rem;display:flex;justify-content:space-between;align-items:baseline}
.section-title span{font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:2px}

.news-grid{display:grid;grid-template-columns:1fr 1px 1fr;gap:2rem}
.grid-divider{background:var(--border)}
.news-item{padding:1.5rem 0;border-bottom:1px solid var(--border);cursor:pointer;transition:all .2s}
.news-item:hover h3{color:var(--accent)}
.news-item:last-child{border-bottom:none}
.news-item .cat{font-size:.65rem;text-transform:uppercase;letter-spacing:2px;color:var(--accent);font-weight:700;margin-bottom:6px}
.news-item h3{font-family:'Playfair Display',serif;font-size:1.25rem;font-weight:700;line-height:1.35;margin-bottom:8px;color:var(--ink);transition:.2s}
.news-item .excerpt{font-size:.88rem;line-height:1.65;color:var(--muted);margin-bottom:8px}
.news-item .meta{font-size:.7rem;color:#b0a898;text-transform:uppercase;letter-spacing:1px}

/* TICKER BAR */
.ticker{background:var(--ink);color:var(--paper);overflow:hidden;padding:10px 0;margin:2rem 0}
.ticker-inner{display:flex;gap:3rem;animation:tickerMove 30s linear infinite;white-space:nowrap}
.ticker-item{font-size:.75rem;letter-spacing:1px;text-transform:uppercase;display:flex;align-items:center;gap:8px}
.ticker-item .dot{width:4px;height:4px;background:var(--accent);border-radius:50%}
@keyframes tickerMove{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* SIDEBAR LIST */
.sidebar-list{counter-reset:item}
.sidebar-item{padding:1rem 0;border-bottom:1px solid var(--border);cursor:pointer;counter-increment:item;position:relative;padding-left:3rem;transition:.2s}
.sidebar-item:hover h4{color:var(--accent)}
.sidebar-item::before{content:counter(item,decimal-leading-zero);position:absolute;left:0;top:1rem;font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:900;color:var(--border)}
.sidebar-item h4{font-family:'Playfair Display',serif;font-size:1rem;font-weight:700;line-height:1.35;margin-bottom:4px;transition:.2s}
.sidebar-item .meta{font-size:.7rem;color:var(--muted)}

/* FILTERS */
.filters{display:flex;gap:8px;margin-bottom:1.5rem;flex-wrap:wrap}
.filter-btn{background:none;border:1px solid var(--border);padding:6px 16px;font-size:.75rem;font-family:'Source Sans 3',sans-serif;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:.2s;color:var(--muted)}
.filter-btn:hover,.filter-btn.active{background:var(--ink);color:var(--paper);border-color:var(--ink)}

/* ARTICLE VIEW */
.article-view{display:none;max-width:720px;margin:0 auto;padding:3rem 2rem}
.article-view .back-btn{display:inline-flex;align-items:center;gap:6px;font-size:.8rem;text-transform:uppercase;letter-spacing:1px;color:var(--muted);cursor:pointer;margin-bottom:2rem;font-weight:600;transition:.2s}
.article-view .back-btn:hover{color:var(--ink)}
.article-view h1{font-family:'Playfair Display',serif;font-size:2.5rem;font-weight:900;line-height:1.2;margin-bottom:1rem;color:var(--ink)}
.article-view .article-meta{color:var(--muted);font-size:.8rem;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border);text-transform:uppercase;letter-spacing:1px}
.article-view .article-body{font-size:1.1rem;line-height:1.9;color:#333}
.article-view .article-body h2{font-family:'Playfair Display',serif;font-size:1.6rem;font-weight:700;margin:2rem 0 1rem;color:var(--ink)}
.article-view .article-body h3{font-family:'Playfair Display',serif;font-size:1.2rem;margin:1.5rem 0 .8rem;color:var(--ink)}
.article-view .article-body p{margin-bottom:1.2rem}
.article-view .article-body strong{color:var(--ink)}
.article-view .article-body blockquote{border-left:3px solid var(--accent);padding:1rem 1.5rem;margin:1.5rem 0;font-style:italic;color:var(--muted);background:rgba(0,0,0,.02)}
.article-view .article-body ul,.article-view .article-body ol{margin:1rem 0 1rem 1.5rem}
.article-view .article-body li{margin-bottom:.5rem}
.article-view .article-body a{color:var(--accent);border-bottom:1px solid var(--accent)}

/* NEWSLETTER */
.newsletter{max-width:1200px;margin:3rem auto;padding:3rem;background:var(--ink);color:var(--paper);display:flex;align-items:center;justify-content:space-between;gap:2rem}
.newsletter h2{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700}
.newsletter p{color:var(--muted);font-size:.85rem;margin-top:4px}
.newsletter-form{display:flex;gap:0}
.newsletter-form input{padding:12px 20px;border:1px solid rgba(255,255,255,.2);background:transparent;color:var(--paper);font-family:inherit;font-size:.85rem;width:280px}
.newsletter-form input:focus{outline:none;border-color:var(--accent)}
.newsletter-form button{padding:12px 24px;background:var(--accent);color:#fff;border:none;font-family:inherit;font-size:.85rem;font-weight:700;text-transform:uppercase;letter-spacing:1px;cursor:pointer;transition:.2s}
.newsletter-form button:hover{background:var(--accent2)}

/* FOOTER */
footer{max-width:1200px;margin:0 auto;padding:3rem 2rem;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:2rem;border-top:2px solid var(--ink)}
footer .brand{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:900}
footer .brand p{font-family:'Source Sans 3',sans-serif;font-size:.8rem;color:var(--muted);margin-top:8px;font-weight:400}
footer h4{font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted);margin-bottom:1rem}
footer ul{list-style:none}
footer li{margin-bottom:8px}
footer li a{color:var(--ink);font-size:.85rem;transition:.2s}
footer li a:hover{color:var(--accent)}
.copyright{text-align:center;padding:1.5rem;font-size:.7rem;color:var(--muted);border-top:1px solid var(--border)}

.loader{text-align:center;padding:4rem;color:var(--muted);font-size:1rem;font-family:'Playfair Display',serif;font-style:italic}

@media(max-width:768px){
.masthead{font-size:2rem}
.hero-card{grid-template-columns:1fr}
.hero-img{min-height:200px}
.news-grid{grid-template-columns:1fr;gap:0}
.grid-divider{display:none}
.newsletter{flex-direction:column;text-align:center}
footer{grid-template-columns:1fr 1fr}
.search-wrap{display:none}
}
</style>
</head>
<body>

<div class="top-bar">√öltima hora en el mundo cripto ¬∑ Actualizado cada hora</div>

<div class="header" style="position:relative">
<div class="header-inner">
<div class="masthead">Cripto<span>Hoy</span></div>
<div class="header-sub">Noticias cripto al instante</div>
<nav class="nav" id="navFilters"></nav>
</div>
<div class="search-wrap"><input type="text" placeholder="Buscar..." oninput="doSearch(this.value)"></div>
</div>

<div id="mainView">
<div class="hero-section" id="heroSection"></div>

<div class="ticker" id="ticker"><div class="ticker-inner" id="tickerInner"></div></div>

<div class="section">
<div class="section-title">√öltimas Noticias <span>Lo m√°s reciente</span></div>
<div class="filters" id="filters"></div>
<div class="news-grid">
<div id="colLeft"></div>
<div class="grid-divider"></div>
<div id="colRight"></div>
</div>
</div>

<div class="newsletter">
<div><h2>Recibe lo mejor cada semana</h2><p>Noticias, an√°lisis y tendencias directo a tu inbox.</p></div>
<div class="newsletter-form"><input type="email" placeholder="Tu email"><button>Suscribir</button></div>
</div>
</div>

<div class="article-view" id="articleView">
<div class="back-btn" onclick="goBack()">‚Üê Volver a noticias</div>
<h1 id="artTitle"></h1>
<div class="article-meta" id="artMeta"></div>
<div class="article-body" id="artBody"></div>
</div>

<footer>
<div class="brand">CriptoHoy<p>Tu fuente confiable de noticias cripto en espa√±ol. Actualizado cada hora con lo m√°s relevante del ecosistema.</p></div>
<div><h4>Categor√≠as</h4><ul><li><a href="#" onclick="setFilter('bitcoin')">Bitcoin</a></li><li><a href="#" onclick="setFilter('defi')">DeFi</a></li><li><a href="#" onclick="setFilter('blockchain')">Blockchain</a></li><li><a href="#" onclick="setFilter('web3')">Web3</a></li></ul></div>
<div><h4>Redes</h4><ul><li><a href="#">Twitter/X</a></li><li><a href="#">Telegram</a></li><li><a href="#">Discord</a></li></ul></div>
<div><h4>Legal</h4><ul><li><a href="#">T√©rminos</a></li><li><a href="#">Privacidad</a></li><li><a href="#">Contacto</a></li></ul></div>
</footer>
<div class="copyright">¬© 2026 CriptoHoy. Todos los derechos reservados.</div>

<script>
const SUPABASE_URL='https://vpvsrjkotstvjywhuacr.supabase.co';
const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwdnNyamtvdHN0dmp5d2h1YWNyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMzE2MzQsImV4cCI6MjA2MjgwNzYzNH0.BDh59N4okIoJB0aOheqp07lYLgd0A4y3Ho1H26xl2jw';
let allNews=[],currentFilter='',searchQuery='';

function parseTags(h){if(!h)return[];if(Array.isArray(h))return h;if(typeof h==='string')return h.split('#').filter(Boolean);return[]}

async function loadNews(){
const r=await fetch(`${SUPABASE_URL}/rest/v1/noticiasesp?status=eq.publicado&order=created_at.desc&limit=60`,
{headers:{'apikey':SUPABASE_KEY,'Authorization':`Bearer ${SUPABASE_KEY}`}});
allNews=await r.json();
buildHero();buildTicker();buildFilters();renderNews();checkHash();
}

function buildHero(){
const el=document.getElementById('heroSection');
if(!allNews.length){el.innerHTML='<div class="loader">Esperando noticias...</div>';return}
const n=allNews[0];
const cats=parseTags(n.hashtags).slice(0,3).map(h=>'#'+h).join(' ¬∑ ');
el.innerHTML=`<div class="hero-card" onclick="showArticle('${n.slug||n.id}')">
<div class="hero-img"><div class="hero-number">01</div></div>
<div class="hero-content">
<div class="cat">${cats}</div>
<h1>${n.titulo_noticia}</h1>
<div class="excerpt">${(n.resumo_noticia||'').replace(/<[^>]*>/g,'').slice(0,200)}...</div>
<div class="meta">${n.created_at?new Date(n.created_at).toLocaleDateString('es-ES',{day:'numeric',month:'long',year:'numeric'}):''}</div>
</div></div>`;
}

function buildTicker(){
const el=document.getElementById('tickerInner');
const items=allNews.slice(0,10).map(n=>`<div class="ticker-item"><span class="dot"></span>${n.titulo_noticia}</div>`).join('');
el.innerHTML=items+items;
}

function buildFilters(){
const cats=[...new Set(allNews.flatMap(n=>parseTags(n.hashtags).slice(0,3)))].slice(0,8);
document.getElementById('filters').innerHTML='<div class="filter-btn active" onclick="setFilter(\'\')">Todas</div>'+
cats.map(c=>`<div class="filter-btn" onclick="setFilter('${c}')">#${c}</div>`).join('');
document.getElementById('navFilters').innerHTML=cats.slice(0,5).map(c=>`<a href="#" onclick="event.preventDefault();setFilter('${c}')">${c}</a>`).join('');
}

function setFilter(f){
currentFilter=f;
document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active',b.textContent==='#'+f||(f===''&&b.textContent==='Todas')));
renderNews();
}

function getFiltered(){
let f=allNews;
if(currentFilter)f=f.filter(n=>parseTags(n.hashtags).includes(currentFilter));
if(searchQuery)f=f.filter(n=>(n.titulo_noticia||'').toLowerCase().includes(searchQuery)||(n.resumo_noticia||'').toLowerCase().includes(searchQuery));
return f;
}

function renderNews(){
const f=getFiltered(),start=currentFilter||searchQuery?0:1;
const items=f.slice(start,30);
const mid=Math.ceil(items.length/2);
const renderItem=n=>{
const cats=parseTags(n.hashtags).slice(0,2).map(h=>'#'+h).join(' ¬∑ ');
const date=n.created_at?new Date(n.created_at).toLocaleDateString('es-ES',{day:'numeric',month:'short'}):''
return`<div class="news-item" onclick="showArticle('${n.slug||n.id}')">
<div class="cat">${cats}</div>
<h3>${n.titulo_noticia}</h3>
<div class="excerpt">${(n.resumo_noticia||'').replace(/<[^>]*>/g,'').slice(0,150)}...</div>
<div class="meta">${date}</div></div>`;
};
document.getElementById('colLeft').innerHTML=items.slice(0,mid).map(renderItem).join('');
document.getElementById('colRight').innerHTML=items.slice(mid).map(renderItem).join('');
}

function parseMarkdown(md){
if(!md)return'';
return md.replace(/^### (.+)$/gm,'<h3>$1</h3>').replace(/^## (.+)$/gm,'<h2>$1</h2>')
.replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>').replace(/\*(.+?)\*/g,'<em>$1</em>')
.replace(/^> (.+)$/gm,'<blockquote>$1</blockquote>')
.replace(/^- (.+)$/gm,'<li>$1</li>').replace(/(<li>.*<\/li>)/gs,'<ul>$1</ul>')
.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>')
.replace(/\n\n/g,'</p><p>').replace(/^/,'<p>').replace(/$/,'</p>');
}

async function showArticle(slug){
let n=allNews.find(a=>(a.slug||a.id)==slug);
if(!n){const r=await fetch(`${SUPABASE_URL}/rest/v1/noticiasesp?slug=eq.${slug}&limit=1`,{headers:{'apikey':SUPABASE_KEY,'Authorization':`Bearer ${SUPABASE_KEY}`}});const d=await r.json();if(d.length)n=d[0]}
if(!n)return;
document.getElementById('artTitle').textContent=n.titulo_noticia;
const date=n.created_at?new Date(n.created_at).toLocaleDateString('es-ES',{weekday:'long',day:'numeric',month:'long',year:'numeric'}):'';
document.getElementById('artMeta').innerHTML=`${date} ¬∑ ${parseTags(n.hashtags).map(h=>'<span style="color:var(--accent)">#'+h+'</span>').join(' ')}`;
document.getElementById('artBody').innerHTML=parseMarkdown(n.corpo_noticia||n.resumo_noticia||'');
document.getElementById('mainView').style.display='none';
document.getElementById('articleView').style.display='block';
location.hash='/article/'+slug;window.scrollTo(0,0);
}

function goBack(){document.getElementById('mainView').style.display='';document.getElementById('articleView').style.display='none';location.hash=''}
function doSearch(q){searchQuery=q.toLowerCase();renderNews()}
function checkHash(){const h=location.hash;if(h.startsWith('#/article/'))showArticle(h.replace('#/article/',''))}
window.addEventListener('hashchange',checkHash);
loadNews();
</script>
</body>
</html>
